(function(){function t(e,r){if({}.hasOwnProperty.call(t.cache,e))return t.cache[e];if("function"==typeof r)return void t.load(e,r);var n=t.resolve(e);if(!n)throw new Error("Failed to resolve module "+e);var i={id:e,require:t,filename:e,exports:{},loaded:!1,parent:null,children:[]},s=e.slice(0,e.lastIndexOf("/")+1);return t.cache[e]=i.exports,n.call(i.exports,i,i.exports,s,e),i.loaded=!0,t.cache[e]=i.exports}t.modules={},t.cache={},t.resolve=function(e){return{}.hasOwnProperty.call(t.modules,e)?t.modules[e]:void 0},t.define=function(e,r){t.modules[e]=r},t.define("./app",function(e){var r,n;n=t("./route"),r=function(){function t(t){null==t&&(t={}),this.state=t,this._routes={},this.views=[]}return t.prototype.addRoute=function(t,e){var r;return null==(r=this._routes[t])&&(r=new n(t)),null==r.callbacks&&(r.callbacks=[]),r.callbacks.push(e),this._routes[t]=r},t.prototype.setupRoutes=function(){var t,e,r,n,i,s;s=this.routes;for(e in s)if(r=s[e],Array.isArray(r))for(n=0,i=r.length;i>n;n++)t=r[n],this.addRoute(e,t);else this.addRoute(e,r);return null},t.prototype.dispatchRoutes=function(){var t,e,r,n,i,s,o;s=this._routes;for(r in s)if(e=s[r],e.regexp.test(location.pathname))for(o=e.callbacks,n=0,i=o.length;i>n;n++)(t=o[n])();return null},t.prototype.start=function(){return this.setupRoutes(),this.dispatchRoutes(),this},t.prototype.get=function(t){return this.state[t]},t.prototype.set=function(t,e){return this.state[t]=e},t.prototype["delete"]=function(t){return delete this.state[t]},t}(),e.exports=r}),t.define("./route",function(e){var r,n;n=t("path-to-regexp"),r=function(){function t(t,e){null==e&&(e={}),this.path="*"===t?"(.*)":t,this.keys=[],this.regexp=n(this.path,this.keys,e.sensitive,e.strict)}return t}(),e.exports=r}),t.define("path-to-regexp",function(t){function e(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function r(t,s,o){s&&!Array.isArray(s)&&(o=s,s=null),s=s||[],o=o||{};var u=o.strict,a=o.end!==!1,l=o.sensitive?"":"i",h=0;if(t instanceof RegExp){var p=t.source.match(/\((?!\?)/g)||[];return s.push.apply(s,p.map(function(t,e){return{name:e,delimiter:null,optional:!1,repeat:!1}})),i(t,s)}if(Array.isArray(t))return t=t.map(function(t){return r(t,s,o).source}),i(new RegExp("(?:"+t.join("|")+")",l),s);t=t.replace(n,function(t,r,n,i,o,u,a,l){if(r)return r;if(l)return"\\"+l;var p="+"===a||"*"===a,c="?"===a||"*"===a;return s.push({name:i||h++,delimiter:n||"/",optional:c,repeat:p}),n=n?"\\"+n:"",o=e(o||u||"[^"+(n||"\\/")+"]+?"),p&&(o=o+"(?:"+n+o+")*"),c?"(?:"+n+"("+o+"))?":n+"("+o+")"});var c="/"===t[t.length-1];return u||(t=(c?t.slice(0,-2):t)+"(?:\\/(?=$))?"),a||(t+=u&&c?"":"(?=\\/|$)"),i(new RegExp("^"+t+(a?"$":""),l),s)}t.exports=r;var n=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),i=function(t,e){return t.keys=e,t}}),t.define("./event-emitter",function(t){var e,r=[].slice;e=function(){function t(t){var e;null==t&&(t={}),this.debug=null!=(e=t.debug)?e:!1,this._listeners={},this._allListeners=[]}return t.prototype.addListener=function(t,e){var r;return t?(null==(r=this._listeners)[t]&&(r[t]=[]),this._listeners[t].push(e),this._listeners[t].length-1):(this._allListeners.push(e),this._allListeners.length-1)},t.prototype.removeListener=function(t,e){return t?void(null!=e?this._listeners[t][e]=null:this._listeners[t]={}):this.removeAllListeners()},t.prototype.removeAllListeners=function(){this._listeners={}},t.prototype.on=function(){return this.addListener.apply(this,arguments)},t.prototype.off=function(){return this.removeListener.apply(this,arguments)},t.prototype.emit=function(){var t,e,n,i,s,o,u,a,l;for(e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],i=this._listeners[e]||[],s=0,u=i.length;u>s;s++)n=i[s],null!=n&&n.apply(this,t);for(t.unshift(e),l=this._allListeners,o=0,a=l.length;a>o;o++)n=l[o],n.apply(this,t);return this.debug?console.log.apply(console,t):void 0},t}(),t.exports=e}),t.define("./model",function(t){var e,r;r=function(t,e,r){var n;return n=t[e],null==n?(t[t]=r,t):void(Array.isArray(n)?n.push(r):t[e]=[n,r])},e=function(){function t(t){var e,r;this.setDefaults();for(e in t)r=t[e],this[e]=r;this.transform()}return t.prototype.defaults={},t.prototype.validators={},t.prototype.transforms={},t.prototype.setDefaults=function(){var t,e,r,n;r=this.defaults,n=[];for(t in r)e=r[t],n.push(this[t]=e);return n},t.prototype.validates=function(t,e){return r(this.validators,t,e),this},t.prototype.validate=function(){var t,e,r,n,i,s;s=this.validators;for(r in s)for(e=s[r],Array.isArray(e)||(e=[e]),n=0,i=e.length;i>n;n++)if(t=e[n],!t(this[r]))return!1;return!0},t.prototype.transforms=function(t,e){return r(this.transforms,t,e),this},t.prototype.transform=function(){var t,e,r,n,i,s;s=this.transforms;for(r in s)for(e=s[r],Array.isArray(e)||(e=[e]),n=0,i=e.length;i>n;n++)t=e[n],this[r]=t(r);return this},t}(),t.exports=e}),t.define("./view",function(e){var r,n=[].slice;r=function(){function e(t){var e,r,n,i,s,o,u,a,l,h;for(null==t&&(t={}),null==this.el&&(this.el=t.el),this.id=this._nextId(this.constructor.name),this.state=null!=(l=t.state)?l:{},this._events={},this._targets={},this._watchers={},h=this.watching,r=s=0,u=h.length;u>s;r=++s)for(n=h[r],Array.isArray(r)||(r=[r]),o=0,a=r.length;a>o;o++)e=r[o],null==(i=this._watchers)[e]&&(i[e]=[]),this._watchers[e].push(n);this.el=this.$el=this._getEl(t),this._cacheTargets()}return e.prototype.el=null,e.prototype.bindings={},e.prototype.computed={},e.prototype.events={},e.prototype.formatters={},e.prototype.watching={},e.prototype.mutators=t("./mutators"),e.prototype._getEl=function(t){return t.$el?t.$el:$(this.template?$(this.template).html():this.html?this.html:this.el)},e.prototype._nextId=function(){var t;return t=0,function(e){var r;return r=++t+"",null!=e?e:e+r}}(),e.prototype._cacheTargets=function(){var t,e,r,n,i,s,o;s=this.bindings,o=[];for(e in s)i=s[e],Array.isArray(i)||(i=[i]),o.push(function(){var e,s,o,u;for(u=[],e=0,s=i.length;s>e;e++)n=i[e],o=this._splitTarget(n),r=o[0],t=o[1],u.push(null==this._targets[r]?this._targets[r]=this.$el.find(r):void 0);return u}.call(this));return o},e.prototype._computeComputed=function(t){var e,r,n,i,s,o,u,a,l;for(e=[],l=this.watching[t],s=0,u=l.length;u>s;s++)for(r=l[s],Array.isArray(r)||(r=[r]),o=0,a=r.length;a>o;o++)n=r[o],e.push(this.state[n]);return i=this.computed[t].apply(this,e)},e.prototype._mutateDom=function(t,e,r){var n,i;(n=null!=(i=this.mutators[e])?i:this.mutators.attr)(this._targets[t],e,r)},e.prototype._renderBindings=function(t,e){var r,n,i,s,o,u,a,l,h;for(null!=this.computed[t]&&(e=this._computeComputed(t)),o=this.bindings[t],Array.isArray(o)||(o=[o]),u=0,a=o.length;a>u;u++)s=o[u],l=this._splitTarget(s),i=l[0],r=l[1],h=null!=(n=this.formatters[t])?n.call(this,e,""+i+" @"+r):e,this._mutateDom(i,r,h)},e.prototype._splitEvent=function(t){var e,r,i,s;if(s=t.split(/\s+/),r=s[0],i=2<=s.length?n.call(s,1):[],i=i.join(" "),!i)return e=this.$el,[e,r];switch(i){case"document":e=$(document);break;case"window":e=$(window);break;default:e=this.$el.find(i)}return[e,r]},e.prototype._splitTarget=function(t){var e,r,n,i;return t.indexOf(!0)?(n=t.split(/\s+@/),r=n[0],e=n[1]):(i=[t,null],r=i[0],e=i[1]),null==e&&(e="text"),[r,e]},e.prototype.get=function(t){return this.state[t]},e.prototype.set=function(t,e){var r,n,i,s,o;if(this.state[t]=e,null!=this.bindings[t]&&this._renderBindings(t,e),null!=(n=this._watchers[t])){for(o=[],i=0,s=n.length;s>i;i++)r=n[i],o.push(this._renderBindings(r));return o}},e.prototype.render=function(t){var e,r,n,i,s;if(null!=t)for(e in t)i=t[e],this.set(e,i);else{s=this.bindings;for(r in s)n=s[r],this._renderBindings(r,this.state[r])}return this},e.prototype.bindEvent=function(t,e){var r,n,i;return i=this._splitEvent(t),r=i[0],n=i[1],"string"==typeof e&&(e=this[e]),r.on(""+n+"."+this.id,function(t){return function(r){return e.call(t,r,r.currentTarget)}}(this)),this},e.prototype.unbindEvent=function(t){var e,r,n;return n=this._splitEvent(t),e=n[0],r=n[1],e.off(""+r+"."+this.id),this},e.prototype.bind=function(){var t,e,r;r=this.events;for(e in r)t=r[e],this.bindEvent(e,t);return this},e.prototype.unbind=function(){var t,e,r;r=this.events;for(e in r)t=r[e],this.unbindEvent(e,t);return this},e.prototype.remove=function(){return this.$el.remove()},e}(),e.exports=r}),t.define("./mutators",function(t){var e,r,n,i,s,o;e=function(t,e,r){return t.attr(e,r)},r=function(t,e,r){return t.prop("checked",r)},n=function(t,e,r){var n;return null==(n=t.data("mvstar-original-classes"))&&(n=t.attr("class"),t.data("mvstar-original-classes",n)),t.removeClass(),t.addClass(""+n+" "+r)},i=function(t,e,r){return t.prop("selectedIndex",r)},s=function(t,e,r){return t.text(r)},o=function(t,e,r){return t.val(r)},t.exports={attr:e,checked:r,"class":n,index:i,selectedIndex:i,text:s,value:o}}),t.define("./index",function(e){e.exports={App:t("./app"),EventEmitter:t("./event-emitter"),Route:t("./route"),Model:t("./model"),View:t("./view")}}),t("./index")}).call(this,this);
